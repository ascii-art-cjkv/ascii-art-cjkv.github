(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{HzKv:function(e,t){e.exports='<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta http-equiv="X-UA-Compatible" content="ie=edge"><link href="https://fonts.googleapis.com/css?family=Asap:400i" rel="stylesheet"><script src="https://cdnjs.cloudflare.com/ajax/libs/jscolor/2.0.4/jscolor.js"><\/script><title>Document</title></head><body><div id="fileDropArea"></div><div class="control"><div class="control_row"><div class="control_item"><label class="label" for="text">text</label><input class="input input--text" id="text" type="text"></div><div class="control_item"><div class="label">color</div><button class="input--color jscolor {            shadow: false, borderWidth: 0, borderRadius: 0, backgroundColor: \'transparent\', insetColor: \'transparent\',             value: \'#004fb0\', valueElement: null,             onFineChange: \'updateColor(this)\'}" id="color"></button><button class="input--color jscolor {            shadow: false, borderWidth: 0, borderRadius: 0, backgroundColor: \'transparent\', insetColor: \'transparent\',             value: \'#fffff1\', valueElement: null,             onFineChange: \'updateBgColor(this)\'}" id="bgColor"></button></div><div class="control_item"><label class="label" for="resolution">resolution</label><input class="input input--range" id="resolution" type="range" min="3" max="100" step="1" value="30"></div></div><div class="control_row"><label class="control_item control_item--checkbox"><input class="input--checkbox" id="webcam" type="checkbox"><div class="label label--checkbox">webcam</div></label><div class="control_item control_item--download"><a id="download" href="#" download="CJKV.png">download</a></div></div></div></body></html>'},IhKj:function(t,i,n){"use strict";n.r(i);n("WMMs"),n("HzKv");var r={on:function(e,t){this.checkEventExistance(e),this[e].push(t)},trigger:function(e,t){this.checkEventExistance(e),this[e].forEach(function(e){return e(t)})},checkEventExistance:function(e){this[e]||(this[e]=[])}},o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.canvasDom=document.createElement("canvas"),this.ctx=this.canvasDom.getContext("2d")}return o(e,[{key:"setReverse",value:function(e){this.isReverse=e}},{key:"setSize",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,i=window.devicePixelRatio>1?2:1;this.width=this.canvasDom.width=e,this.height=this.canvasDom.height=t,this.canvasDom.style.width=e/i+"px",this.canvasDom.style.height=t/i+"px",this.isReverse&&(this.ctx.translate(this.width,0),this.ctx.scale(-1,1))}},{key:"setFont",value:function(e){this.ctx.font=e,this.ctx.textBaseline="top"}},{key:"clear",value:function(){this.ctx.clearRect(0,0,this.width,this.height)}},{key:"getImageData",value:function(){return this.ctx.getImageData(0,0,this.width,this.height).data}}]),e}();Object.assign(a.prototype,r);var s=a,c=n("PoH+"),u=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var l=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.size=5,i.init(),i.parse(e),i}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s),u(t,[{key:"init",value:function(){this.rawChars=[],this.chars=[],this.setSize(this.size),this.setFont(this.size+"px/"+this.size+"px sans-serif")}},{key:"parse",value:function(e){this.chars=[],this.updateChars(e),this.trigger("charsUpdated",this.chars)}},{key:"updateChars",value:function(e){this.rawChars=e.replace(/[\n| ]/g,"").split(""),this.rawChars=Array.from(new Set(this.rawChars)),this.rawChars.forEach(this.updateChar.bind(this)),this.chars=Object(c.sortBy)(this.chars,"pixelCount")}},{key:"updateChar",value:function(e){this.ctx.fillText(e,0,0),this.chars.push({char:e,pixelCount:this.getSumPixelCount()}),this.clear()}},{key:"getSumPixelCount",value:function(){return this.getImageData().filter(function(e){return e>0}).reduce(function(e,t){return e+t})}}]),t}(),h=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var f=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.resolution=e,i}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s),h(t,[{key:"setImageSize",value:function(e,t){this.imageWidth=e,this.imageHeight=t,this.trigger("imageSizeChanged")}},{key:"rescale",value:function(){this.setSize(Math.floor(this.resolution*this.imageWidth/this.imageHeight),this.resolution)}},{key:"updateGrayData",value:function(){this.grayData=this.getGrayData(),this.trigger("grayDataUpdated")}},{key:"getGrayData",value:function(){for(var e=this.getImageData(),t=[],i=0;i<e.length;i+=4){var n=[e[i],e[i+1],e[i+2]],r=.3*n[0]+.59*n[1]+.11*n[2];t.push(r)}return t}}]),t}(),d=n("xWp2"),p=n.n(d),v=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var b=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.load(),i}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,f),v(t,[{key:"load",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p.a,i=document.createElement("img");i.onload=function(){e.setImageSize(e.imgDom.width,e.imgDom.height),e.draw()},i.src=t,this.imgDom=i}},{key:"draw",value:function(){this.rescale(),this.ctx.drawImage(this.imgDom,0,0,this.width,this.height),this.updateGrayData()}},{key:"setResolution",value:function(e){this.resolution=e,this.draw()}}]),t}(),y=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var m=function(t){function i(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var t=g(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e));return navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?(t.video=document.createElement("video"),t.video.setAttribute("autoplay",!0),t.video.setAttribute("playsinline",!0),t.setReverse(!0),t.observe(),t):g(t,!1)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,f),y(i,[{key:"getWebcam",value:function(){var t=this;navigator.mediaDevices.getUserMedia({video:{},audio:!1}).then(function(e){t.video.srcObject=e,t.isPlaying=!0}).catch(function(t){console.error("Rejected!",e)})}},{key:"stopWebcam",value:function(){this.video.srcObject&&(this.video.srcObject.getTracks().forEach(function(e){return e.stop()}),this.video.srcObject=null,this.isPlaying=!1)}},{key:"observe",value:function(){var e=this;this.video.addEventListener("loadedmetadata",function(){e.setImageSize(e.video.videoWidth,e.video.videoHeight),e.rescale(),requestAnimationFrame(e.play.bind(e))})}},{key:"play",value:function(){this.isPlaying&&(this.draw(),requestAnimationFrame(this.play.bind(this)))}},{key:"draw",value:function(){this.ctx.drawImage(this.video,0,0,this.width,this.height),this.updateGrayData()}},{key:"setResolution",value:function(e){this.resolution=e,this.isPlaying&&(this.rescale(),this.draw())}}]),i}(),w=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var k=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return Object.assign(i,Object.assign({text:"\u4e2d\u6587\u5b57",resolution:50,webcam:!1,color:"#cc0000",bgColor:"#000000"},e)),i.charParser=new l(i.text),i.webcamParser=new m(i.resolution),i.imageParser=new b(i.resolution),i.appendCanvasToBody(),i.fullscreen(),i.setSourceToWebcam(i.webcam),i.updateCharSize(),i.observe(),i}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s),w(t,[{key:"setSourceToWebcam",value:function(e){this.sourceObj=e&&this.webcamParser||this.imageParser,e?this.webcamParser.getWebcam():(this.webcamParser.stopWebcam(),this.resize())}},{key:"setResolution",value:function(e){this.resolution=e,this.imageParser.setResolution(e),this.webcamParser.setResolution(e),this.updateCharSize(),this.redraw()}},{key:"setColor",value:function(e){this.color=e,this.ctx.fillStyle=this.color,this.redraw()}},{key:"setBgColor",value:function(e){this.bgColor=e,this.redraw()}},{key:"toDataURL",value:function(){return this.canvasDom.toDataURL("image/png")}},{key:"appendCanvasToBody",value:function(){this.canvasDom.setAttribute("id","ascii"),document.body.appendChild(this.canvasDom)}},{key:"observe",value:function(){this.charParser.on("charsUpdated",this.redraw.bind(this)),this.webcamParser.on("grayDataUpdated",this.redraw.bind(this)),this.imageParser.on("grayDataUpdated",this.redraw.bind(this)),this.imageParser.on("imageSizeChanged",this.resize.bind(this)),this.webcamParser.on("imageSizeChanged",this.resize.bind(this)),window.addEventListener("resize",this.resize.bind(this))}},{key:"redraw",value:function(){this.sourceObj.grayData&&this.charParser.chars&&(this.grayData=this.getMappedGrayData(),this.draw())}},{key:"resize",value:function(){var e=this.sourceObj,t=e.imageHeight,i=e.imageWidth,n=window.devicePixelRatio>1?2:1,r=(window.innerWidth-40-130)*n,o=(window.innerHeight-40-130)*n,a=i/t,s=void 0,c=void 0;r/o<a?c=(s=r)/a:s=a*(c=o),this.setSize(s,c),this.setColor(this.color),this.updateCharSize(),this.redraw()}},{key:"updateCharSize",value:function(){this.charSize=this.height/this.resolution,this.setFont(this.charSize+"px sans-serif")}},{key:"fullscreen",value:function(){var e=window.devicePixelRatio>1?2:1;this.setSize(window.innerWidth*e,window.innerHeight*e)}},{key:"clear",value:function(){this.ctx.save(),this.ctx.fillStyle=this.bgColor,this.ctx.fillRect(0,0,this.width,this.height),this.ctx.restore()}},{key:"draw",value:function(){this.clear();for(var e=void 0,t=void 0,i=void 0,n=(this.width-this.charSize*this.sourceObj.width)/2,r=0;r<this.sourceObj.height;r++)for(var o=0;o<this.sourceObj.width;o++)e=r*this.sourceObj.width+o,t=this.grayData[e],(i=this.charParser.chars[t-(this.isTransparent?1:0)])&&this.ctx.fillText(i.char,o*this.charSize+n,r*this.charSize)}},{key:"getMappedGrayData",value:function(){var e=this,t=this.sourceObj.grayData,i=this.charParser.chars,n=Math.min.apply(null,t),r=Math.max.apply(null,t),o=i.length-(this.isTransparent?0:1);return t.map(function(t){return o-Math.round(e.mapToRange(t,n,r,0,o))})}},{key:"mapToRange",value:function(e,t,i,n,r){return n+(e-t)/(i-t)*(r-n)}}]),t}(),O=n("oHqP"),j=n.n(O);var x=function(e){j()("#fileDropArea",{onDrop:function(t,i,n,r){var o=t[0],a=new FileReader;a.addEventListener("load",function(t){var i="data:image/jpg;base64,"+function(e){for(var t,i=0,n=e.length,r="";i<n;)t=e.subarray(i,Math.min(i+32768,n)),r+=String.fromCharCode.apply(null,t),i+=32768;return btoa(r)}(new Uint8Array(t.target.result));e.imageParser.load(i)}),a.addEventListener("error",function(e){console.error("FileReader error"+e)}),a.readAsArrayBuffer(o)},onDragEnter:function(){return document.body.classList.add("drag-file")},onDragOver:function(){!function(){console.log.apply(this,arguments)}("onDragOver")},onDragLeave:function(){return document.body.classList.remove("drag-file")}})},C=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var P={text:"\u4e2d\u6587\u5b57\u7684\u9806\u5e8f\u6703\u5f71\u97ff\u95b1\u8b80\u3002\u3105\u3106\u3107\u3108\u3109\u310a\u310b\u310c\u310d\u310e\u310f\u3110",resolution:30,color:"#004fb0",bgColor:"#fffff1"},_=new k(P);x(_),new(function(){function e(t){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object.keys(t).forEach(function(e){i.addElement(e);var n=t[e],r="boolean"===typeof n?"checked":"value";i[e][r]=n})}return C(e,[{key:"addElement",value:function(e){return this[e]=document.getElementById(e)}},{key:"on",value:function(e,t,i){return(this[e]||this.addElement(e)).addEventListener(t,i),this}}]),e}())(P).on("text","change",function(e){return _.charParser.parse(e.target.value)}).on("webcam","change",function(e){return _.setSourceToWebcam(e.target.checked)}).on("download","click",function(e){return e.target.href=_.toDataURL()}).on("resolution","change",function(e){return _.setResolution(e.target.value)}),window.updateColor=function(e){return _.setColor("#"+e)},window.updateBgColor=function(e){return _.setBgColor("#"+e)}},WMMs:function(e,t,i){},xWp2:function(e,t,i){e.exports=i.p+"images/sample.b10aa7d6.png"}},[["IhKj",0,1]]]);